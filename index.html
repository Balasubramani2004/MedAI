<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<title>MedAI Clinical Severity Predictor</title>

<style>
body {
  margin: 0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: #f3f6fb;
}

/* Center container */
.container {
  max-width: 720px;
  margin: 40px auto;
  padding: 20px;
}

/* Card */
.card {
  background: white;
  padding: 28px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

/* Title */
h1 {
  text-align: center;
  margin-bottom: 20px;
  color: #1a2b4b;
}

/* Inputs */
label {
  font-weight: 600;
  margin-top: 12px;
  display: block;
}

textarea, input, select {
  width: 100%;
  padding: 12px;
  margin-top: 6px;
  border-radius: 8px;
  border: 1px solid #d0d7e2;
  font-size: 14px;
}

/* Button */
button {
  margin-top: 18px;
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 10px;
  background: #2563eb;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}

button:hover {
  background: #1d4ed8;
}

/* Result card */
.result {
  margin-top: 22px;
  padding: 18px;
  border-radius: 12px;
  background: #f7f9fc;
  display: none;
}

/* Severity colors */
.low { color: #16a34a; font-weight: bold; }
.medium { color: #ea580c; font-weight: bold; }
.high { color: #dc2626; font-weight: bold; }

/* Clinical box */
.clinical {
  margin-top: 12px;
  background: #eef2ff;
  padding: 12px;
  border-radius: 8px;
  font-size: 14px;
}

/* Explain toggle */
.explain-box {
  display: none;
  margin-top: 12px;
  padding: 12px;
  background: #fff7ed;
  border-radius: 8px;
  font-size: 14px;
}

.explain-btn {
  margin-top: 10px;
  background: #0ea5e9;
}
</style>

</head>

<body>

<div class="container">
  <div class="card">

```
<h1>MedAI Clinical Severity Predictor</h1>

<label>Describe Symptoms</label>
<textarea id="text" rows="3" placeholder="e.g. fever, headache, breathing difficulty"></textarea>

<label>Age</label>
<input type="number" id="age">

<label>Gender</label>
<select id="gender">
  <option value="male">Male</option>
  <option value="female">Female</option>
</select>

<label>Duration (days)</label>
<input type="number" id="duration">

<button onclick="predict()">Analyze Severity</button>

<!-- RESULT -->
<div class="result" id="result"></div>

<button class="explain-btn" id="explainBtn" style="display:none;" onclick="toggleExplain()">
  Show Clinical Explanation
</button>

<div class="explain-box" id="explainBox"></div>
```

  </div>
</div>

<script>
async function predict() {

  const text = document.getElementById("text").value;
  const age = parseInt(document.getElementById("age").value);
  const gender = document.getElementById("gender").value;
  const duration_days = parseInt(document.getElementById("duration").value);

  try {
    const res = await fetch("http://127.0.0.1:8000/predict", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text, age, gender, duration_days })
    });

    const data = await res.json();

    const sevClass = data.severity.toLowerCase();

    document.getElementById("result").style.display = "block";
    document.getElementById("result").innerHTML = `
      <h3>Severity: <span class="${sevClass}">${data.severity}</span></h3>
      <p><b>Confidence:</b> ${data.confidence}</p>
      <p><b>Advice:</b> ${data.advice}</p>

      <div class="clinical">
        <b>Clinical Indicators</b><br>
        ICU Risk: ${data.clinical_features.icu_risk}<br>
        Mortality Risk: ${data.clinical_features.mortality_risk}<br>
        Length of Stay: ${data.clinical_features.length_of_stay_days} days
      </div>
    `;

    document.getElementById("explainBox").innerText = data.explanation;
    document.getElementById("explainBtn").style.display = "block";

  } catch (err) {
    alert("‚ùå Backend not running. Start with: uvicorn app:app --reload");
  }
}

function toggleExplain() {
  const box = document.getElementById("explainBox");
  box.style.display = box.style.display === "none" ? "block" : "none";
}
</script>

</body>
</html>
